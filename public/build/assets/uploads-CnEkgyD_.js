function p(){var a;const e=(a=document.querySelector('meta[name="api-base-url"]'))==null?void 0:a.getAttribute("content");if(e)try{const i=new URL(e,window.location.origin),c=i.pathname.replace(/\/api(\/v\d+)?\/?$/,"");return`${i.origin}${c}`}catch(i){console.warn("Invalid api-base-url meta tag, falling back to origin.",i)}const r=window.location.origin,t=window.location.pathname||"/",o=t.indexOf("/public"),n=o!==-1?t.slice(0,o+7):"";return`${r}${n}`}function f(e){if(!e)return"";const r=String(e).trim();if(r==="")return"";const t=/^\/?(uploads|storage)\/?/i;if(/^https?:\/\//i.test(r))try{const n=(new URL(r).pathname||"").replace(/^\/+/,"");return t.test(n)?s(n):r}catch{return r}return t.test(r)?s(r):r.replace(/^\/+/,"")}function h(e,r=null){if(!e||typeof e!="string")return"";const t=e.trim();if(t==="")return"";if(/^(data:|\/\/)/i.test(t))return t;const o=/^\/?(uploads|storage)\/?/i,n=(r||p()).replace(/\/$/,"");if(/^https?:\/\//i.test(t))try{const l=(new URL(t).pathname||"").replace(/^\/+/,"");if(o.test(l)){const u=s(l);return`${n}/${u}`}return t}catch{return t}const a=s(t),i=a.startsWith("/")?a:`/${a}`;return`${n}${i}`}function s(e){return e.replace(/^\/+/,"").replace(/^storage\//i,"")}export{f as n,h as r};
