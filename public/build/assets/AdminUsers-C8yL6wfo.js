import{a as K}from"./adminPaginationMixin-DN7Wb3ng.js";import{r as Q,n as X}from"./uploads-CnEkgyD_.js";import{U as Z}from"./UserProfileDialog-BCG5KECv.js";import{_ as $,c as u,b as a,a as s,w as r,f as m,r as d,e as y,t as p,F as k,z,g as ee,d as V,A as te,B as oe,C as R,o as n}from"./app-CnnV-4Hh.js";import"./moment-C5S46NFB.js";const le={components:{UserProfileDialog:Z},mixins:[K],data(){return{users:[],roles:[],roleFilter:null,roleOptions:[],dialog:!1,editingUser:null,saving:!1,form:{name:"",email:"",role_ids:[],password:"",password_confirmation:"",avatar:"",phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""},activeTab:"basic",genderOptions:[{title:"Male",value:"male"},{title:"Female",value:"female"},{title:"Other",value:"other"}],rules:{required:t=>Array.isArray(t)?t.length>0||"At least one role is required":!!t||"This field is required",email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"Invalid email",minLength:t=>t?t.length>=8||"Password must be at least 8 characters":!0},currentUserId:null,showPassword:!1,showPasswordConfirmation:!1,avatarFile:null,uploadingAvatar:!1,profileDialogVisible:!1,selectedUser:null}},async mounted(){await this.loadRoles(),await this.loadUsers(),this.loadCurrentUser()},methods:{async loadUsers(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.roleFilter&&(t.role=this.roleFilter);const e=await this.$axios.get("/api/v1/users",{params:t,headers:this.getAuthHeaders()}),g=e.data.data||[];this.users=g,this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load users")}finally{this.loading=!1}},async loadRoles(){try{const t=await this.$axios.get("/api/v1/users/roles",{headers:this.getAuthHeaders()});this.roles=t.data.roles,this.roleOptions=this.roles.map(e=>({title:e.label,value:e.value}))}catch(t){console.error("Error loading roles:",t)}},loadCurrentUser(){const t=localStorage.getItem("admin_token");this.$axios.get("/api/v1/auth/user",{headers:{Authorization:`Bearer ${t}`}}).then(e=>{this.currentUserId=e.data.id}).catch(()=>{})},openDialog(t){if(this.avatarFile=null,this.activeTab="basic",t){this.editingUser=t;const e=t.roles?t.roles.map(c=>c.id):[],g=this.normalizeImageInput(t.avatar||"");this.form={name:t.name||"",email:t.email||"",role_ids:e,password:"",password_confirmation:"",avatar:g,phone:t.phone||"",date_of_birth:t.date_of_birth||"",gender:t.gender||null,address:t.address||"",city:t.city||"",state:t.state||"",country:t.country||"",postal_code:t.postal_code||"",bio:t.bio||""}}else{this.editingUser=null;const e=this.roles.length>0?this.roles[0].value:null;this.form={name:"",email:"",role_ids:e?[e]:[],password:"",password_confirmation:"",avatar:"",phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""}}this.dialog=!0},closeDialog(){this.dialog=!1,this.editingUser=null,this.activeTab="basic";const t=this.roles.length>0?this.roles[0].value:null;this.form={name:"",email:"",role_ids:t?[t]:[],password:"",password_confirmation:"",avatar:"",phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""},this.showPassword=!1,this.showPasswordConfirmation=!1,this.avatarFile=null,this.$refs.form&&this.$refs.form.resetValidation()},async handleAvatarUpload(){var g;if(!this.avatarFile)return;const t=Array.isArray(this.avatarFile)?this.avatarFile[0]:this.avatarFile;if(!t)return;if(!t.type.startsWith("image/")){this.showError("Please select a valid image file"),this.avatarFile=null;return}const e=5*1024*1024;if(t.size>e){this.showError("File size must be less than 5MB"),this.avatarFile=null;return}this.uploadingAvatar=!0;try{const c=new FormData;c.append("image",t),c.append("folder","users"),this.form.name&&c.append("prefix",this.form.name);const o=localStorage.getItem("admin_token"),i=await this.$axios.post("/api/v1/upload/image",c,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}});if(i.data.success){const f=this.normalizeImageInput(i.data.path||i.data.url);this.form.avatar=f,this.avatarFile=null,this.showSuccess("Avatar uploaded successfully")}else throw new Error(i.data.message||"Failed to upload avatar")}catch(c){console.error("Error uploading avatar:",c);let o="Failed to upload avatar";c.response?o=((g=c.response.data)==null?void 0:g.message)||c.response.statusText||o:c.message&&(o=c.message),this.showError(o),this.avatarFile=null}finally{this.uploadingAvatar=!1}},clearAvatar(){this.form.avatar="",this.avatarFile=null},async saveUser(){var t,e,g,c;if(this.form.password&&this.form.password!==this.form.password_confirmation){this.showError("Passwords do not match");return}if(!this.editingUser&&!this.form.password){this.showError("Password is required for new users");return}if(this.editingUser&&this.form.password&&!this.form.password_confirmation){this.showError("Please confirm the password");return}if(this.$refs.form.validate()){this.saving=!0;try{const o=localStorage.getItem("admin_token"),i=this.editingUser?`/api/v1/users/${this.editingUser.id}`:"/api/v1/users",f={...this.form};this.form.role_ids&&(f.role_ids=Array.isArray(this.form.role_ids)?this.form.role_ids:[this.form.role_ids]),this.form.password?f.password_confirmation=this.form.password_confirmation:(delete f.password,delete f.password_confirmation),f.avatar=this.normalizeImageInput(f.avatar),delete f.role;const b=this.editingUser?"put":"post";await axios[b](i,f,{headers:{Authorization:`Bearer ${o}`}}),this.showSuccess(this.editingUser?"User updated successfully":"User created successfully"),this.closeDialog(),await this.loadUsers()}catch(o){console.error("Error saving user:",o);let i="Error saving user";if((e=(t=o.response)==null?void 0:t.data)!=null&&e.errors){const f=o.response.data.errors,b=[];Object.keys(f).forEach(v=>{b.push(f[v][0])}),i=b.join(", ")}else(c=(g=o.response)==null?void 0:g.data)!=null&&c.message&&(i=o.response.data.message);this.showError(i)}finally{this.saving=!1}}},async deleteUser(t){if(t.id===this.currentUserId){this.showError("You cannot delete your own account");return}if(confirm(`Are you sure you want to delete ${t.name}?`))try{const e=localStorage.getItem("admin_token");await this.$axios.delete(`/api/v1/users/${t.id}`,{headers:{Authorization:`Bearer ${e}`}}),this.showSuccess("User deleted successfully"),await this.loadUsers()}catch(e){this.handleApiError(e,"Error deleting user")}},getRoleLabel(t){const e=this.roles.find(g=>g.slug===t);return e?e.label:t},getRoleColor(t){return{administrator:"error",editor:"primary","hr-user":"success",staff:"info"}[t]||"primary"},onPerPageChange(){this.resetPagination(),this.loadUsers()},onSort(t){this.handleSort(t),this.loadUsers()},normalizeImageInput(t){return X(t)},resolveImageUrl(t){return Q(t)},async viewUserProfile(t){try{const e=localStorage.getItem("admin_token"),g=await this.$axios.get(`/api/v1/users/${t.id}`,{headers:{Authorization:`Bearer ${e}`}});this.selectedUser=g.data,this.profileDialogVisible=!0}catch(e){console.error("Error loading user profile:",e),this.selectedUser=t,this.profileDialogVisible=!0,this.handleApiError(e,"Failed to load user profile details")}}}},se={class:"page-header"},re={class:"text-caption text-grey"},ae={key:0},ie={class:"d-flex align-center"},ne={class:"d-flex align-center"},de={class:"d-flex align-center"},me={class:"d-flex align-center gap-2"},ue={class:"d-flex flex-wrap gap-1"},pe={class:"d-flex"},fe={class:"d-flex align-center gap-2"},ce={key:1,class:"text-white"},ge={key:0,class:"d-flex align-center"},ve={key:1,class:"text-caption text-grey"},he={key:0,class:"d-flex flex-column"},_e={key:0,class:"text-body-2"},ye={key:1,class:"text-caption text-grey"},we={key:2,class:"text-caption text-grey"},be={key:1,class:"text-caption text-grey"},Ue={key:0,class:"d-flex flex-wrap gap-1"},Ve={key:1,class:"text-caption text-grey"},ke={key:0},Pe={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},xe={class:"text-caption text-grey"},Ce={key:0},Ae={key:0,class:"ml-2"},Ie={key:1},ze={key:0,class:"d-flex align-center gap-2"},Fe={class:"pa-6"},Se={key:1,class:"text-grey text-caption align-self-center"},Ee={class:"mb-4"},De={key:0,class:"mb-3 text-center"},Be={class:"pa-6"},Re={class:"pa-6"};function qe(t,e,g,c,o,i){const f=d("v-btn"),b=d("v-select"),v=d("v-col"),_=d("v-text-field"),F=d("v-row"),P=d("v-card-text"),x=d("v-card"),S=d("v-card-title"),U=d("v-icon"),w=d("v-skeleton-loader"),E=d("v-img"),D=d("v-avatar"),C=d("v-chip"),q=d("v-table"),N=d("v-pagination"),A=d("v-tab"),T=d("v-tabs"),M=d("v-list-item"),O=d("v-progress-circular"),L=d("v-file-input"),I=d("v-window-item"),B=d("v-textarea"),j=d("v-window"),G=d("v-form"),H=d("v-spacer"),W=d("v-card-actions"),J=d("v-dialog"),Y=d("UserProfileDialog");return n(),u("div",null,[a("div",se,[e[31]||(e[31]=a("h1",{class:"text-h4 page-title"},"User Management",-1)),s(f,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=l=>i.openDialog(null)),class:"add-button"},{default:r(()=>e[30]||(e[30]=[m(" Add New User ")])),_:1,__:[30]})]),s(x,{class:"mb-4"},{default:r(()=>[s(P,null,{default:r(()=>[s(F,null,{default:r(()=>[s(v,{cols:"12",md:"4"},{default:r(()=>[s(b,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=l=>t.perPage=l),i.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(v,{cols:"12",md:"4"},{default:r(()=>[s(b,{modelValue:o.roleFilter,"onUpdate:modelValue":[e[2]||(e[2]=l=>o.roleFilter=l),i.loadUsers],items:o.roleOptions,label:"Filter by Role",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(v,{cols:"12",md:"4"},{default:r(()=>[s(_,{modelValue:t.search,"onUpdate:modelValue":e[3]||(e[3]=l=>t.search=l),label:"Search by name, email, phone, city, or country","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:i.loadUsers},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),s(x,null,{default:r(()=>[s(S,{class:"d-flex justify-space-between align-center"},{default:r(()=>[e[33]||(e[33]=a("span",null,"Users",-1)),a("span",re,[e[32]||(e[32]=m(" Total Records: ")),a("strong",null,p(t.pagination.total||0),1),o.users.length>0?(n(),u("span",ae," | Showing "+p((t.currentPage-1)*t.perPage+1)+" to "+p(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+p(t.pagination.total),1)):y("",!0)])]),_:1,__:[33]}),s(P,null,{default:r(()=>[s(q,null,{default:r(()=>[a("thead",null,[a("tr",null,[a("th",{class:"sortable",onClick:e[4]||(e[4]=l=>i.onSort("name"))},[a("div",ie,[e[34]||(e[34]=m(" Name ")),s(U,{icon:t.getSortIcon("name"),size:"small",class:"ml-1"},null,8,["icon"])])]),a("th",{class:"sortable",onClick:e[5]||(e[5]=l=>i.onSort("email"))},[a("div",ne,[e[35]||(e[35]=m(" Email ")),s(U,{icon:t.getSortIcon("email"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[37]||(e[37]=a("th",null,"Phone",-1)),e[38]||(e[38]=a("th",null,"Location",-1)),e[39]||(e[39]=a("th",null,"Role",-1)),a("th",{class:"sortable",onClick:e[6]||(e[6]=l=>i.onSort("created_at"))},[a("div",de,[e[36]||(e[36]=m(" Created ")),s(U,{icon:t.getSortIcon("created_at"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[40]||(e[40]=a("th",null,"Actions",-1))])]),a("tbody",null,[t.loading?(n(),u(k,{key:0},z(5,l=>a("tr",{key:`skeleton-${l}`},[a("td",null,[a("div",me,[s(w,{type:"avatar",width:"32",height:"32"}),s(w,{type:"text",width:"150"})])]),a("td",null,[s(w,{type:"text",width:"200"})]),a("td",null,[s(w,{type:"text",width:"120"})]),a("td",null,[s(w,{type:"text",width:"150"})]),a("td",null,[a("div",ue,[s(w,{type:"chip",width:"80",height:"24",class:"mr-1"}),s(w,{type:"chip",width:"70",height:"24"})])]),a("td",null,[s(w,{type:"text",width:"120"})]),a("td",null,[a("div",pe,[s(w,{type:"button",width:"32",height:"32",class:"mr-1"}),s(w,{type:"button",width:"32",height:"32"})])])])),64)):(n(),u(k,{key:1},[(n(!0),u(k,null,z(o.users,l=>(n(),u("tr",{key:l.id},[a("td",null,[a("div",fe,[s(D,{size:"32",color:"primary"},{default:r(()=>[l.avatar?(n(),V(E,{key:0,src:l.avatar,alt:l.name},null,8,["src","alt"])):(n(),u("span",ce,p(l.name.charAt(0).toUpperCase()),1))]),_:2},1024),m(" "+p(l.name),1)])]),a("td",null,p(l.email),1),a("td",null,[l.phone?(n(),u("span",ge,[s(U,{size:"small",class:"mr-1"},{default:r(()=>e[41]||(e[41]=[m("mdi-phone")])),_:1,__:[41]}),m(" "+p(l.phone),1)])):(n(),u("span",ve,"-"))]),a("td",null,[l.city||l.country?(n(),u("div",he,[l.city?(n(),u("span",_e,p(l.city),1)):y("",!0),l.country?(n(),u("span",ye,p(l.country),1)):y("",!0),!l.city&&!l.country?(n(),u("span",we,"-")):y("",!0)])):(n(),u("span",be,"-"))]),a("td",null,[l.roles&&l.roles.length>0?(n(),u("div",Ue,[(n(!0),u(k,null,z(l.roles,h=>(n(),V(C,{key:h.id,color:i.getRoleColor(h.slug),size:"small"},{default:r(()=>[m(p(h.name),1)]),_:2},1032,["color"]))),128))])):(n(),u("span",Ve,"No roles"))]),a("td",null,p(t.formatDate(l.created_at)),1),a("td",null,[s(f,{size:"small",icon:"mdi-eye",onClick:h=>i.viewUserProfile(l),variant:"text",color:"info",title:"View Profile"},null,8,["onClick"]),s(f,{size:"small",icon:"mdi-pencil",onClick:h=>i.openDialog(l),variant:"text",title:"Edit User"},null,8,["onClick"]),s(f,{size:"small",icon:"mdi-delete",onClick:h=>i.deleteUser(l),variant:"text",color:"error",disabled:l.id===o.currentUserId,title:"Delete User"},null,8,["onClick","disabled"])])]))),128)),o.users.length===0?(n(),u("tr",ke,e[42]||(e[42]=[a("td",{colspan:"7",class:"text-center py-4"},"No users found",-1)]))):y("",!0)],64))])]),_:1}),a("div",Pe,[a("div",xe,[o.users.length>0&&t.pagination.total>0?(n(),u("span",Ce,[e[43]||(e[43]=m(" Showing ")),a("strong",null,p((t.currentPage-1)*t.perPage+1),1),e[44]||(e[44]=m(" to ")),a("strong",null,p(Math.min(t.currentPage*t.perPage,t.pagination.total)),1),e[45]||(e[45]=m(" of ")),a("strong",null,p(t.pagination.total.toLocaleString()),1),e[46]||(e[46]=m(" records ")),t.pagination.last_page>1?(n(),u("span",Ae," (Page "+p(t.currentPage)+" of "+p(t.pagination.last_page)+") ",1)):y("",!0)])):(n(),u("span",Ie," No records found "))]),t.pagination.last_page>1?(n(),u("div",ze,[s(N,{modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=l=>t.currentPage=l),i.loadUsers],length:t.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):y("",!0)])]),_:1})]),_:1}),s(J,{modelValue:o.dialog,"onUpdate:modelValue":e[28]||(e[28]=l=>o.dialog=l),"max-width":"900",scrollable:"",persistent:""},{default:r(()=>[s(x,null,{default:r(()=>[s(S,null,{default:r(()=>[m(p(o.editingUser?"Edit User":"Add New User"),1)]),_:1}),s(P,{class:"pa-0"},{default:r(()=>[s(G,{ref:"form",onSubmit:ee(i.saveUser,["prevent"])},{default:r(()=>[s(T,{modelValue:o.activeTab,"onUpdate:modelValue":e[8]||(e[8]=l=>o.activeTab=l),"bg-color":"grey-lighten-4"},{default:r(()=>[s(A,{value:"basic"},{default:r(()=>e[47]||(e[47]=[m("Basic Information")])),_:1,__:[47]}),s(A,{value:"profile"},{default:r(()=>e[48]||(e[48]=[m("Profile Information")])),_:1,__:[48]}),s(A,{value:"security"},{default:r(()=>e[49]||(e[49]=[m("Security")])),_:1,__:[49]})]),_:1},8,["modelValue"]),s(j,{modelValue:o.activeTab,"onUpdate:modelValue":e[27]||(e[27]=l=>o.activeTab=l)},{default:r(()=>[s(I,{value:"basic"},{default:r(()=>[a("div",Fe,[s(_,{modelValue:o.form.name,"onUpdate:modelValue":e[9]||(e[9]=l=>o.form.name=l),label:"Full Name",rules:[o.rules.required],required:"",class:"mb-4"},null,8,["modelValue","rules"]),s(_,{modelValue:o.form.email,"onUpdate:modelValue":e[10]||(e[10]=l=>o.form.email=l),label:"Email",type:"email",rules:[o.rules.required,o.rules.email],required:"",class:"mb-4"},null,8,["modelValue","rules"]),s(b,{modelValue:o.form.role_ids,"onUpdate:modelValue":e[11]||(e[11]=l=>o.form.role_ids=l),items:o.roles,"item-title":"label","item-value":"value",label:"Roles",rules:[o.rules.required],required:"",multiple:"",chips:"",class:"mb-4"},{item:r(({props:l,item:h})=>[s(M,te(oe(l)),{title:r(()=>[m(p(h.raw.label)+" ",1),h.raw.is_system?(n(),V(C,{key:0,size:"x-small",color:"warning",class:"ml-2"},{default:r(()=>e[50]||(e[50]=[m(" System ")])),_:1,__:[50]})):y("",!0)]),subtitle:r(()=>[m(p(h.raw.description),1)]),_:2},1040)]),selection:r(({item:l,index:h})=>[h<2?(n(),V(C,{key:0,size:"small",class:"mr-1"},{default:r(()=>[m(p(l.raw.label),1)]),_:2},1024)):y("",!0),h===2?(n(),u("span",Se," (+"+p(o.form.role_ids.length-2)+" others) ",1)):y("",!0)]),_:1},8,["modelValue","items","rules"]),a("div",Ee,[e[52]||(e[52]=a("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Avatar",-1)),o.form.avatar?(n(),u("div",De,[s(D,{size:"80",class:"mb-2"},{default:r(()=>[s(E,{src:o.form.avatar?i.resolveImageUrl(o.form.avatar):"",alt:"Avatar Preview"},null,8,["src"])]),_:1}),a("div",null,[s(f,{size:"small",variant:"text",color:"error","prepend-icon":"mdi-delete",onClick:i.clearAvatar},{default:r(()=>e[51]||(e[51]=[m("Remove Avatar")])),_:1,__:[51]},8,["onClick"])])])):y("",!0),s(L,{modelValue:o.avatarFile,"onUpdate:modelValue":[e[12]||(e[12]=l=>o.avatarFile=l),i.handleAvatarUpload],label:"Upload Avatar",variant:"outlined",density:"comfortable",color:"primary",accept:"image/*","prepend-icon":"mdi-image",hint:"Upload an avatar image (JPG, PNG, GIF, WebP - Max 5MB). Recommended size: 200x200px","persistent-hint":"","show-size":"",class:"mb-3"},R({_:2},[o.uploadingAvatar?{name:"append-inner",fn:r(()=>[s(O,{indeterminate:"",size:"20",color:"primary"})]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue"]),s(_,{modelValue:o.form.avatar,"onUpdate:modelValue":e[14]||(e[14]=l=>o.form.avatar=l),label:"Or Enter Avatar URL",variant:"outlined",density:"comfortable",color:"primary",hint:"Enter a direct URL to the avatar image","persistent-hint":"","prepend-inner-icon":"mdi-link"},R({_:2},[o.form.avatar&&!o.avatarFile?{name:"append-inner",fn:r(()=>[s(f,{icon:"mdi-open-in-new",variant:"text",size:"small",onClick:e[13]||(e[13]=l=>t.window.open(i.resolveImageUrl(o.form.avatar),"_blank"))})]),key:"0"}:void 0]),1032,["modelValue"])])])]),_:1}),s(I,{value:"profile"},{default:r(()=>[a("div",Be,[s(F,null,{default:r(()=>[s(v,{cols:"12",md:"6"},{default:r(()=>[s(_,{modelValue:o.form.phone,"onUpdate:modelValue":e[15]||(e[15]=l=>o.form.phone=l),label:"Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",hint:"e.g., +8801707080401","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"6"},{default:r(()=>[s(_,{modelValue:o.form.date_of_birth,"onUpdate:modelValue":e[16]||(e[16]=l=>o.form.date_of_birth=l),label:"Date of Birth",type:"date",variant:"outlined","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"6"},{default:r(()=>[s(b,{modelValue:o.form.gender,"onUpdate:modelValue":e[17]||(e[17]=l=>o.form.gender=l),items:o.genderOptions,label:"Gender",variant:"outlined","prepend-inner-icon":"mdi-gender-male-female",clearable:""},null,8,["modelValue","items"])]),_:1}),s(v,{cols:"12"},{default:r(()=>[s(B,{modelValue:o.form.address,"onUpdate:modelValue":e[18]||(e[18]=l=>o.form.address=l),label:"Address",variant:"outlined",rows:"2","prepend-inner-icon":"mdi-map-marker",hint:"Street address","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"4"},{default:r(()=>[s(_,{modelValue:o.form.city,"onUpdate:modelValue":e[19]||(e[19]=l=>o.form.city=l),label:"City",variant:"outlined","prepend-inner-icon":"mdi-city"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"4"},{default:r(()=>[s(_,{modelValue:o.form.state,"onUpdate:modelValue":e[20]||(e[20]=l=>o.form.state=l),label:"State/Province",variant:"outlined","prepend-inner-icon":"mdi-map"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"4"},{default:r(()=>[s(_,{modelValue:o.form.country,"onUpdate:modelValue":e[21]||(e[21]=l=>o.form.country=l),label:"Country",variant:"outlined","prepend-inner-icon":"mdi-earth"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"6"},{default:r(()=>[s(_,{modelValue:o.form.postal_code,"onUpdate:modelValue":e[22]||(e[22]=l=>o.form.postal_code=l),label:"Postal Code",variant:"outlined","prepend-inner-icon":"mdi-mailbox"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12"},{default:r(()=>[s(B,{modelValue:o.form.bio,"onUpdate:modelValue":e[23]||(e[23]=l=>o.form.bio=l),label:"Bio/Description",variant:"outlined",rows:"4","prepend-inner-icon":"mdi-text",hint:"Brief description about the user","persistent-hint":"",counter:1e3},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(I,{value:"security"},{default:r(()=>[a("div",Re,[s(_,{modelValue:o.form.password,"onUpdate:modelValue":e[25]||(e[25]=l=>o.form.password=l),label:"Password",type:o.showPassword?"text":"password",rules:o.editingUser?[]:[o.rules.required,o.rules.minLength],required:!o.editingUser,hint:"Leave blank to keep current password","persistent-hint":"",class:"mb-4","prepend-inner-icon":"mdi-lock"},{"append-inner":r(()=>[s(f,{icon:"",variant:"text",size:"small",onClick:e[24]||(e[24]=l=>o.showPassword=!o.showPassword)},{default:r(()=>[s(U,null,{default:r(()=>[m(p(o.showPassword?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","type","rules","required"]),!o.editingUser||o.form.password?(n(),V(_,{key:0,modelValue:o.form.password_confirmation,"onUpdate:modelValue":e[26]||(e[26]=l=>o.form.password_confirmation=l),label:"Confirm Password",type:o.showPasswordConfirmation?"text":"password",rules:o.form.password?[()=>!!o.form.password_confirmation||"Please confirm your password",()=>o.form.password_confirmation===o.form.password||"Passwords do not match"]:[],required:!!o.form.password,"prepend-inner-icon":"mdi-lock-check"},null,8,["modelValue","type","rules","required"])):y("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}),s(W,null,{default:r(()=>[s(H),s(f,{onClick:i.closeDialog,variant:"text"},{default:r(()=>e[53]||(e[53]=[m("Cancel")])),_:1,__:[53]},8,["onClick"]),s(f,{onClick:i.saveUser,color:"primary",loading:o.saving},{default:r(()=>[m(p(o.editingUser?"Update":"Create"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Y,{modelValue:o.profileDialogVisible,"onUpdate:modelValue":e[29]||(e[29]=l=>o.profileDialogVisible=l),user:o.selectedUser},null,8,["modelValue","user"])])}const je=$(le,[["render",qe],["__scopeId","data-v-4383e9af"]]);export{je as default};
